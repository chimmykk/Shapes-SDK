import { OpenAI } from "openai";

export interface ShapesClientOptions {
  apiKey?: string;
  appId?: string;
  authToken?: string;
  baseUrl?: string;
}

export function createShapesClient({
  apiKey,
  appId,
  authToken,
  baseUrl = "https://api.shapes.inc/v1",
}: ShapesClientOptions): OpenAI {
  const headers: Record<string, string> = {};

  if (appId && authToken) {
    headers["X-App-ID"] = appId;
    headers["X-User-Auth"] = authToken;
  }

  return new OpenAI({
    apiKey: apiKey ?? "not-needed", // fallback for cases without apiKey
    baseURL: baseUrl,
    defaultHeaders: headers,
  });
}
